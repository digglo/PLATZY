define("jbf/screens/view_activities/view_activities",["jbf/utils/define-class","ojs/ojcore","knockout","jbf/core/abstract-screen-view-model","jbf/core/api-layer"],function(t,e,i,s,r){var n=s;return t(n,function(t){n.apply(this,arguments);this.requestURL=t.request,this._setTitle(),this.isExit=!1,"object"==typeof _DATA&&(_DATA.isDispatcherNavigation=!1)},{_setTitle:function(){this.settingTitlePromise=r.require("api-app",1),this.settingTitlePromise.then(function(t){this.settingTitlePromise=null,t.setTitle(this.i18n(19924))}.bind(this),function(){this.settingTitlePromise=null}.bind(this))},load:function(t){this.loadAsset=LoadDispatcherAssets(),this.loadAsset.then(function(){this.isExit||t.ready()}.bind(this)).catch(function(){t.error()})},init:function(){this._dataMediator.addListenerOnce("dispose",this.dispose.bind(this))},canExit:function(){$(this.constructor.ACTIVITY_CONTAINER).remove(),this.toggleManage(!1),$("#jbf-container-body").show(),this.isExit=!0,toa.app.unbind("sn.chat.create",this.setStartChatTrigger,this),toa&&toa.app&&toa.app.trigger&&toa.app.trigger("suspend.dispatch.controller",{label:"view_activities"})},onViewReady:function(t){this.viewElement=t,this.toggleManage(!0);var e={treeDate:_DATA.tree_date,structure:_DATA.p_tree,treeUpdatesFor:_DATA.tree_updates_for,version:_DATA.tree_version,structChangeTime:_DATA.struct_change_time,treeRoots:_DATA.tree_roots,treeMode:_DATA.tree_mode};toa.app.trigger("register.dispatch.controller",{view_activities:{controller:toa.ActivitiesScreen.ScreenController,options:{treeInitialData:e,mainTreeState:toa.ResourcesTree,items:[{label:"time",url:"",name:"Time",controller:toa.ActivitiesScreen.views.Time},{label:"list",url:"",name:"List",controller:toa.ActivitiesScreen.views.List},{label:"map",url:"",name:"Map",controller:toa.ActivitiesScreen.views.ActivitiesMap}]}}}),toa.app.trigger("layout.menu.click",{label:"view_activities",url:this.requestURL,name:this.i18n(19924)});var i=$app.request().popNonTrackingData()||{};i.pid&&toa.app.trigger("global.provider.select",{pid:i.pid}),toa.app.bind("sn.chat.create",this.setStartChatTrigger,this)},setStartChatTrigger:function(t,e){this.isCommunityAccess()&&e&&e.address&&e.address!==$app.model().user().getCommunityId()&&r.require("api-community",1).then(function(t){t.openChat($app.model().communityService().getLoginByAddress(e.address))}.bind(this))},isCommunityAccess:function(){return $app.model().community().isAuthorized()},getCurrentDate:function(){return $app.model().provider().getDate("Y-m-d")},dispose:function(){n.prototype.dispose.apply(this,arguments)}},{ACTIVITY_CONTAINER:"#toa-configuration-screen"})}),define("text!jbf/screens/view_activities/view_activities.html",[],function(){return"<div>Activities</div>"});